function testWebP(e){var s=new Image;s.onload=s.onerror=function(){e(2==s.height)},s.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")}));let nameValid=e=>{let s=e.match(/(?=.*?[#?!@$%^&*/"'|])/),a=""!==e&&!s;fieldsState.firstName.isValid=a,toggleClass([firstnameField,firstnameField__redLabel],a)};let lastNameValid=e=>{let s=e.match(/(?=.*?[#?!@$%^&*-=+/"'|])/),a=""!==e&&!s;fieldsState.lastName.isValid=a,toggleClass([lastNameField,lastnameField__redLabel],a)},mailValid=e=>{let s=e.match(/^[a-zA-Z_0-9]+?\.[a-zA-Z0-9]+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/);fieldsState["E-mail"].isValid=!!s,toggleClass([emailField,inputEmail__redLabel],!!s)},passValid=e=>{let s=e.match(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/);fieldsState.password.isValid=!!s,fieldsState.confPass.isValid=compirePasswords(),toggleClass([confirmPassField,confirmPassField__redLabel],compirePasswords()),toggleClass([passField,passField__redLabel],!!s)},passConfirm=()=>{toggleClass([confirmPassField,confirmPassField__redLabel],compirePasswords()),fieldsState.confPass.isValid=compirePasswords()},compirePasswords=()=>fieldsState.confPass.value===fieldsState.password.value&&""!==fieldsState.password.value;async function sentRequest(e){await fetch("./js/server-ok.json",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((e=>e.json())).catch((()=>{getError()}))}async function getError(){await fetch("./js/server-error.json").then((e=>e.json())).then((e=>console.log(e.Error)))}let firstnameField=document.querySelector(".firstnameField"),lastNameField=document.querySelector(".lastNameField"),fields=document.querySelector(".fields"),formUpperText__heading=document.querySelector(".formUpperText__heading"),formUpperText__subHeading=document.querySelector(".formUpperText__subHeading"),emailField=document.querySelector(".inputEmail"),passField=document.querySelector(".passField"),singUpForm__submitBtn=document.querySelector(".singUpForm__submitBtn"),confirmPassField=document.querySelector(".confirmPassField"),inputEmail__redLabel=document.querySelector(".inputEmail__redLabel"),passField__redLabel=document.querySelector(".passField__redLabel"),confirmPassField__redLabel=document.querySelector(".confirmPassField__redLabel"),firstnameField__redLabel=document.querySelector(".firstnameField__redLabel"),lastnameField__redLabel=document.querySelector(".lastnameField__redLabel"),formUpperText=document.querySelector(".formUpperText"),successTxt=document.querySelector(".successTxt"),fieldsState={"E-mail":{value:"",isValid:!1},password:{value:"",isValid:!1},confPass:{value:"",isValid:!1},firstName:{value:"",isValid:!1},lastName:{value:"",isValid:!1}};fields.addEventListener("input",(e=>{e.preventDefault(),fieldsState[e.target.name].value=e.target.value,fieldReducer(e.target.name)})),fields.addEventListener("submit",(e=>{e.preventDefault();const s=new FormData(e.target),a=Object.fromEntries(s);isFieldsValid()?(sentRequest(a),hideNode(singUpForm__submitBtn),hideNode(fields),hideNode(formUpperText__subHeading),hideNode(formUpperText__heading),showNode(successTxt)):toggleSmbBtnClass()}));let fieldReducer=e=>{switch(e){case"lastName":lastNameValid(fieldsState.lastName.value);break;case"E-mail":mailValid(fieldsState["E-mail"].value);break;case"password":passValid(fieldsState.password.value);break;case"confPass":passConfirm(fieldsState.confPass.value);break;case"firstName":nameValid(fieldsState.firstName.value)}},isFieldsValid=()=>{for(key in fieldsState)if(!fieldsState[key].isValid)return!1;return!0},hideNode=e=>{e.classList.add("fields--hide")},showNode=e=>{e.classList.add("singUpForm--showBlock")},toggleSmbBtnClass=()=>{singUpForm__submitBtn.classList.add("btnAnimation"),setTimeout((()=>{singUpForm__submitBtn.classList.remove("btnAnimation")}),500)},toggleClass=(e,s)=>{if(s)return e[0].style.background="url(./img/truefilled.svg) no-repeat right center",e[0].classList.remove("singUpForm--invalidInput"),e[1].classList.remove("singUpForm--showBlock"),!0;e[0].style.background="none",e[0].classList.add("singUpForm--invalidInput"),e[1].classList.add("singUpForm--showBlock")},overflowHeading=()=>{formUpperText__subHeading.innerHTML.length>64&&(formUpperText__subHeading.innerHTML=formUpperText__subHeading.innerHTML+"...")};overflowHeading();